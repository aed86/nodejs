/**
 * @see https://github.com/paulzi/paulzi-form
 * @license MIT (https://github.com/paulzi/paulzi-form/blob/master/LICENSE)
 * @version 2.4.1
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){var t=function(t){var a=t.find("output, .form-output").first(),r=t.data("formOutput");return r&&(a=e(r)),a},a=function(t){return-1!==e.inArray(t.prop("tagName"),["INPUT","BUTTON"])&&-1!==e.inArray(t.attr("type").toLowerCase(),["submit","image"])};e.fn.formAlert=function(a,r,n){var o=e(this),i=e(n?a:e.parseHTML(a,!0));return i.hasClass("alert")||(r=r||"info",i=e('<div role="alert" class="alert alert-'+r+'">').append(i)),e.fn.alert&&!i.hasClass("alert-dismissible")&&(i.addClass("alert-dismissible"),e('<button type="button" class="close" aria-label="close" data-dismiss="alert">').html('<span aria-hidden="true">&times;</span>').prependTo(i)),i.addClass("fade in").appendTo(t(o)),i};var r=function(t){if(t.isDefaultPrevented())return!1;var r=e(this);if(r.hasClass("form-loading")&&!r.hasClass("form-no-block"))return t.preventDefault(),!1;r.addClass("form-loading");var n=e(document.activeElement).filter(".btn-loading");a(n)||(n=r.find(".btn-loading.btn-submit-default")),n.addClass("disabled");var o=n.attr("data-loading-text");o&&(n.data("paulziFormLoadingText",n.text()),n.text(o));var i=n.data("loadingIcon");i&&(e("<span>&nbsp;</span>").addClass("btn-loading-space").prependTo(n),e("<i>").addClass("btn-loading-icon").addClass(i).prependTo(n))},n=function(){var t=e(this).find(".btn-loading.disabled");t.removeClass("disabled"),t.children(".btn-loading-icon, .btn-loading-space").remove(),t.each(function(){var t=e(this),a=t.data("paulziFormLoadingText");a&&t.text(a)})};e(document).on("submit.paulzi-form","form",r),e(document).on("formajaxalways.paulzi-form",".form-ajax",n);var o,i=["action","enctype","method","target"],s="paulzi-form-polyfill",d=s+"-disabled",l=function(){if("undefined"!=typeof o)return o;var e=document.createElement("input"),t=document.createElement("form"),a="paulzi-form-support";return t.id=a,document.body.appendChild(t),document.body.appendChild(e),e.setAttribute("form",a),o=e.form===t,document.body.removeChild(t),document.body.removeChild(e),o},u=function(){var e=document.createElement("input");return!!("formAction"in e)},m=function(){var t=this,r=e(this);if(!l()){var n,o=r.attr("id");n=r.find("[form]").not(":disabled"),o&&(n=n.not('[form="'+o+'"]')),n.addClass(d).prop("disabled",!0),o&&e('[form="'+o+'"]').not("form#"+o+' [form="'+o+'"]').filter(function(){return this.name&&!e(this).is(":disabled")&&(this.checked||"checkbox"!==this.type&&"radio"!==this.type)}).each(function(){e('<input type="hidden">').attr("name",this.name).val(e(this).val()).addClass(s).appendTo(t)})}if(!u()){var m=e(document.activeElement);a(m)&&e.each(i,function(e,t){var a=m.attr("form"+t);a&&r.data("paulziFormPolyfill"+t,a).attr(t,a)})}},f=function(){var t=e(this);l()||(t.find("."+s).remove(),t.find("."+d).removeClass(d).prop("disabled",!1)),u()||e.each(i,function(e,a){var r="paulziFormPolyfill"+a,n=t.data(r);n&&t.attr(a,n).removeData(r)})};e(document).on("submit.paulzi-form","form",m),e(document).on("formajaxalways.paulzi-form","form",f);var p="paulzi-form-no-empty-item",c=function(){return e(this).find(":enabled").filter(function(){return""==this.value}).addClass(p).prop("disabled",!0),!0},v=function(){e(this).find("."+p).removeClass(p).prop("disabled",!1)};e(document).on("submit.paulzi-form",".form-no-empty",c),e(document).on("formajaxalways.paulzi-form",".form-no-empty",v);var h=function(t){var a=e(this).offset();e(this).prop("paulziFormX",Math.round(t.pageX-a.left)).prop("paulziFormY",Math.round(t.pageY-a.top))},b=function(r){if(r.isDefaultPrevented())return!1;if(e(document.activeElement).hasClass("btn-no-ajax"))return!0;r.preventDefault();var n=e(this),o=function(e){var t=e.getResponseHeader("X-Redirect");return t?(document.location.href=t,!0):!1},i="multipart/form-data"==n.attr("enctype")&&"function"==typeof e.fn.ajaxSubmit,s=function(a,r,s){var d=jQuery.Event("formajaxdone");if(n.trigger(d,arguments),!d.isDefaultPrevented()&&!o(s)&&(i||/^text\/html(;|$)/.test(s.getResponseHeader("Content-Type")))){var l=e(e.parseHTML(a,!0));if(n.trigger("contentprepare",[l]),l.hasClass("form-replace"))n.replaceWith(l);else{var u=t(n),m=l.data("formOutput");m&&(u=e(m)),l.hasClass("alert")&&(l=n.formAlert(l,!1,!0)),u.html(l)}n.trigger("contentinit",[l])}},d=function(t,a,r){var i=jQuery.Event("formajaxfail");if(n.trigger(i,arguments),!i.isDefaultPrevented()&&!o(t)){var s=!1;t.responseText&&(s=e(e.parseHTML(t.responseText,!0))),s&&s.hasClass("alert")?n.formAlert(s,!1,!0):(s=["["+a+"]",r,t.responseText].join("<br>"),n.formAlert(s,"danger"))}},l=function(){var e=jQuery.Event("formajaxalways");n.trigger(e,arguments),e.isDefaultPrevented()||n.removeClass("form-loading")},u=function(e,t){var a=jQuery.Event("formajaxbefore");return n.trigger(a,[e,t]),!a.isDefaultPrevented()};if(i)n.ajaxSubmit({beforeSubmit:function(e,t,a){a.beforeSend=u},success:s,error:d,complete:l,data:{"X-Requested-With":"XMLHttpRequest"},uploadProgress:function(e){var t=0,a=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=a/r*100),n.trigger("formajaxprogress",[a,r,t])}});else{var m,f=n.attr("action"),p=n.attr("method")||"GET",c=n.serializeArray(),v=e(document.activeElement),h=!v.is(":disabled")&&a(v);h&&((m=v.attr("formaction"))&&(f=m),(m=v.attr("formmethod"))&&(p=m),v.attr("name")&&(m=v.prop("paulziFormX"),"number"==typeof m?(c.push({name:v.attr("name")+".x",value:m}),v.removeProp("paulziFormX")):c.push({name:v.attr("name"),value:v.val()}),m=v.prop("paulziFormY"),"number"==typeof m&&(c.push({name:v.attr("name")+".y",value:m}),v.removeProp("paulziFormY")))),e.ajax({method:p,url:f,data:c,beforeSend:u}).done(s).fail(d).always(l)}return!1};e(document).on("click.paulzi-form",'input[type="image"]',h),e(document).on("submit.paulzi-form",".form-ajax",b)});